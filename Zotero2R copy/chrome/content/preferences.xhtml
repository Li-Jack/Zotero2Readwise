<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Zotero2Readwise 设置</title>
  <link rel="stylesheet" href="chrome://zotero2readwise/skin/preferences.css" />
  <script src="chrome://zotero2readwise/content/preferences.js"></script>
</head>
<body onload="Zotero2ReadwisePreferences.init()">
  <div class="container">
    <h1>Zotero2Readwise 设置</h1>
    
    <form id="settingsForm">
      <div class="section">
        <h2>API 配置</h2>
        
        <div class="field">
          <label for="readwiseToken">Readwise Access Token *</label>
          <input type="password" id="readwiseToken" required />
          <small>获取地址: <a href="https://readwise.io/access_token" target="_blank">https://readwise.io/access_token</a></small>
        </div>
        
        <div class="field">
          <label for="zoteroKey">Zotero API Key *</label>
          <input type="password" id="zoteroKey" required />
          <small>获取地址: <a href="https://www.zotero.org/settings/keys" target="_blank">https://www.zotero.org/settings/keys</a></small>
        </div>
        
        <div class="field">
          <label for="zoteroLibraryId">Zotero Library ID *</label>
          <input type="text" id="zoteroLibraryId" required />
          <small>在 Zotero API Keys 页面可以找到您的 User ID</small>
        </div>
        
      </div>
      
      <div class="section">
        <h2>同步选项</h2>
        
        <div class="field">
          <label>
            <input type="checkbox" id="includeAnnotations" checked />
            包含注释 (高亮和评论)
          </label>
        </div>
        
        <div class="field">
          <label>
            <input type="checkbox" id="includeNotes" />
            包含笔记
          </label>
        </div>
        
        <div class="field">
          <label>
            <input type="checkbox" id="useSince" checked />
            仅同步上次运行后的新项目
          </label>
        </div>
      </div>
      
      <div class="section">
        <h2>过滤选项</h2>
        
        <div class="field">
          <label for="filterColors">按颜色过滤高亮</label>
          <div class="color-filters">
            <label><input type="checkbox" name="filterColor" value="yellow" /> 黄色</label>
            <label><input type="checkbox" name="filterColor" value="red" /> 红色</label>
            <label><input type="checkbox" name="filterColor" value="green" /> 绿色</label>
            <label><input type="checkbox" name="filterColor" value="blue" /> 蓝色</label>
            <label><input type="checkbox" name="filterColor" value="purple" /> 紫色</label>
            <label><input type="checkbox" name="filterColor" value="magenta" /> 品红</label>
            <label><input type="checkbox" name="filterColor" value="orange" /> 橙色</label>
            <label><input type="checkbox" name="filterColor" value="gray" /> 灰色</label>
          </div>
          <small>仅同步选中颜色的高亮（不选择表示同步所有颜色）</small>
        </div>
        
        <div class="field">
          <label for="filterTags">按标签过滤</label>
          <input type="text" id="filterTags" placeholder="输入标签，用逗号分隔" />
          <small>仅同步包含这些标签的项目（留空表示不过滤）</small>
        </div>
        
        <div class="field">
          <label>
            <input type="checkbox" id="includeFilteredTagsInNote" />
            在笔记中包含过滤标签
          </label>
        </div>
      </div>
      
      
      <div class="actions">
        <button type="submit">保存设置</button>
        <button type="button" id="testConnection">测试连接</button>
        <button type="button" id="syncNow">立即同步</button>
        <button type="button" id="exportFailedItems">导出失败项</button>
        <button type="button" id="clearCache">清除缓存</button>
      </div>
    </form>
    
    <div id="status" class="status"></div>
  </div>
</body>
</html>