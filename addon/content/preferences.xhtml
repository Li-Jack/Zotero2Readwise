<linkset>
  <html:link rel="localization" href="__addonRef__-preferences.ftl" />
  <html:link rel="stylesheet" href="chrome://__addonRef__/content/preferences.css" />
</linkset>
<groupbox
  onload="Zotero.__addonInstance__.hooks.onPrefsEvent('load', { window });"
>
  <label><html:h2 data-l10n-id="pref-title"></html:h2></label>
  
  <!-- API Settings Section -->
  <groupbox>
    <label><html:h3 data-l10n-id="pref-api-settings"></html:h3></label>
    <hbox align="center">
      <html:label
        for="zotero-prefpane-__addonRef__-apiToken"
        data-l10n-id="pref-api-token"
      ></html:label>
      <html:input
        type="password"
        id="zotero-prefpane-__addonRef__-apiToken"
        preference="apiToken"
        size="40"
        style="flex: 1;"
      ></html:input>
      <html:button
        id="zotero-prefpane-__addonRef__-testConnection"
        data-l10n-id="pref-test-connection"
      ></html:button>
    </hbox>
  </groupbox>

  <!-- Sync Scope Section -->
  <groupbox>
    <label><html:h3 data-l10n-id="pref-sync-scope"></html:h3></label>
    <radiogroup id="zotero-prefpane-__addonRef__-syncScope" preference="syncScope">
      <radio value="myLibrary" data-l10n-id="pref-sync-my-library" />
      <radio value="selectedGroups" data-l10n-id="pref-sync-selected-groups" />
    </radiogroup>
    <hbox class="indent">
      <vbox flex="1">
        <html:label data-l10n-id="pref-selected-groups"></html:label>
        <html:select
          id="zotero-prefpane-__addonRef__-selectedGroups"
          multiple="true"
          size="5"
          style="width: 100%; min-height: 100px;"
          preference="selectedGroups"
        ></html:select>
      </vbox>
    </hbox>
  </groupbox>

  <!-- Annotation Types Section -->
  <groupbox>
    <label><html:h3 data-l10n-id="pref-annotation-types"></html:h3></label>
    <checkbox
      id="zotero-prefpane-__addonRef__-syncHighlights"
      preference="syncHighlights"
      data-l10n-id="pref-sync-highlights"
    />
    <checkbox
      id="zotero-prefpane-__addonRef__-syncNotes"
      preference="syncNotes"
      data-l10n-id="pref-sync-notes"
    />
    <html:div class="note" data-l10n-id="pref-annotation-note"></html:div>
  </groupbox>

  <!-- Color Strategy Section -->
  <groupbox>
    <label><html:h3 data-l10n-id="pref-color-strategy"></html:h3></label>
    <radiogroup id="zotero-prefpane-__addonRef__-colorStrategy" preference="colorStrategy">
      <radio value="asTags" data-l10n-id="pref-color-as-tags" />
      <radio value="ignore" data-l10n-id="pref-color-ignore" />
    </radiogroup>
  </groupbox>

  <!-- Auto Sync Section -->
  <groupbox>
    <label><html:h3 data-l10n-id="pref-auto-sync"></html:h3></label>
    <checkbox
      id="zotero-prefpane-__addonRef__-autoSyncOnStart"
      preference="autoSyncOnStart"
      data-l10n-id="pref-auto-sync-on-start"
    />
    <hbox align="center">
      <checkbox
        id="zotero-prefpane-__addonRef__-autoSyncInterval"
        preference="autoSyncInterval"
        data-l10n-id="pref-auto-sync-interval"
      />
      <html:input
        type="number"
        id="zotero-prefpane-__addonRef__-syncIntervalMinutes"
        preference="syncIntervalMinutes"
        min="15"
        max="1440"
        value="60"
        style="width: 60px;"
      ></html:input>
      <html:label data-l10n-id="pref-minutes"></html:label>
    </hbox>
  </groupbox>

  <!-- Advanced Settings Section -->
  <groupbox>
    <label><html:h3 data-l10n-id="pref-advanced"></html:h3></label>
    <hbox align="center">
      <html:label
        for="zotero-prefpane-__addonRef__-batchSize"
        data-l10n-id="pref-batch-size"
      ></html:label>
      <html:input
        type="number"
        id="zotero-prefpane-__addonRef__-batchSize"
        preference="batchSize"
        min="10"
        max="200"
        value="50"
        style="width: 60px;"
      ></html:input>
    </hbox>
    <hbox align="center">
      <html:label
        for="zotero-prefpane-__addonRef__-rateLimit"
        data-l10n-id="pref-rate-limit"
      ></html:label>
      <html:input
        type="number"
        id="zotero-prefpane-__addonRef__-rateLimit"
        preference="rateLimit"
        min="1"
        max="60"
        value="20"
        style="width: 60px;"
      ></html:input>
      <html:label data-l10n-id="pref-requests-per-minute"></html:label>
    </hbox>
  </groupbox>

</groupbox>
<vbox>
  <html:label
    data-l10n-id="pref-help"
    data-l10n-args='{"time": "__buildTime__","name": "__addonName__","version":"__buildVersion__"}'
  ></html:label>
</vbox>
