<linkset>
  <html:link rel="stylesheet" href="chrome://zotero2readwise/skin/zotero2readwise.css" />
</linkset>
<script src="chrome://zotero2readwise/content/preferences.js"></script>

<vbox onload="Zotero2ReadwisePreferences.init()">
    
    <!-- API 配置 -->
    <groupbox>
      <label><html:h2>API 配置</html:h2></label>
      
      <hbox align="center">
        <label for="readwiseToken" value="Readwise Access Token:" width="150"/>
        <html:input type="password" id="readwiseToken" flex="1" required="true" />
        <button label="获取" oncommand="Zotero.launchURL('https://readwise.io/access_token')" />
      </hbox>
      
      <hbox align="center">
        <label for="zoteroKey" value="Zotero API Key:" width="150"/>
        <html:input type="password" id="zoteroKey" flex="1" required="true" />
        <button label="获取" oncommand="Zotero.launchURL('https://www.zotero.org/settings/keys')" />
      </hbox>
      
      <hbox align="center">
        <label for="zoteroLibraryId" value="Zotero Library ID:" width="150"/>
        <html:input type="text" id="zoteroLibraryId" flex="1" required="true" />
        <description style="margin-left: 150px">在 Zotero API Keys 页面可以找到您的 User ID</description>
      </hbox>
    </groupbox>
    
    <!-- 同步选项 -->
    <groupbox>
      <label><html:h2>同步选项</html:h2></label>
      
      <checkbox id="includeAnnotations" label="包含注释 (高亮和评论)" checked="true" />
      <checkbox id="includeNotes" label="包含笔记" />
      <checkbox id="useSince" label="仅同步上次运行后的新项目" checked="true" />
    </groupbox>
    
    <!-- 操作按钮 -->
    <vbox>
      <description style="text-align: center; color: #666; margin-bottom: 10px;">
        注意：请点击“保存设置”按钮保存您的更改
      </description>
      <hbox pack="center">
        <button id="saveSettings" label="保存设置" oncommand="Zotero2ReadwisePreferences.saveSettings()" style="font-weight: bold;" />
        <button id="testConnection" label="测试连接" oncommand="Zotero2ReadwisePreferences.testConnection()" />
        <button id="syncNow" label="立即同步" oncommand="Zotero2ReadwisePreferences.syncNow()" />
      </hbox>
    </vbox>
    
    <!-- 状态显示 -->
    <hbox pack="center">
      <description id="status" style="margin-top: 10px; font-weight: bold;" />
    </hbox>
</vbox>
